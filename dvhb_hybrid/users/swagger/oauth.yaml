paths:
  '/oauth/{provider}':
    $name: dvhb_hybrid.user:oauth
    get:
      $handler: dvhb_hybrid.users.views.UserOAuthView.oauth_handler
      tags:
      - user
      summary: Login (and user registration if necessary) using social network account
      description: Returns api_key on successful auth
      parameters:
      - &provider
        name: provider
        in: path
        description: Name of social network (as specified in application configuration file)
        required: true
        type: string
        enum:
        - facebook
        - google
        - vk
      produces:
        - application/json
      responses:
        200:
          $ref: "#/responses/AuthSuccessful"
        201:
          $ref: "#/responses/AuthSuccessful"


responses:
  AuthSuccessful:
    description: OK
    headers:
      Authorization:
        type: string
        description: API key to be used for user identification
    schema:
      type: object
      properties:
        uid:
          type: string
          description: ID of user
          required: true
      example:
        uid: 1
